{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport { collection, getDocs } from 'firebase/firestore';\nimport db from \"../../config\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function VisualizaAlunosBanco(props) {\n  var colecaoHistorico = collection(db, 'Histórico');\n  var colecaoAluno = collection(db, 'Aluno');\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    vetorHistorico = _useState2[0],\n    setVetorHistorico = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    matriculas = _useState4[0],\n    setMatriculas = _useState4[1];\n  var _useState5 = useState([]),\n    _useState6 = _slicedToArray(_useState5, 2),\n    vetorAluno = _useState6[0],\n    setVetorAluno = _useState6[1];\n  var _useState7 = useState([]),\n    _useState8 = _slicedToArray(_useState7, 2),\n    dadosAlunosTurma = _useState8[0],\n    setDadosAlunosTurma = _useState8[1];\n  var renderiza = function renderiza(_ref) {\n    var item = _ref.item;\n    var tamanho = Dimensions.get('window').height / matriculas.length;\n    try {\n      return _jsxs(View, {\n        style: {\n          flex: 1,\n          flexDirection: 'row',\n          justifyContent: 'space-between',\n          marginLeft: '500'\n        },\n        children: [_jsx(Image, {\n          style: {\n            width: 100,\n            height: 100,\n            resizeMode: 'contain'\n          },\n          source: {\n            uri: item.foto\n          }\n        }), _jsx(Button, {\n          color: \"#005c81\",\n          title: item.nome,\n          onPress: function onPress() {\n            return props.navigation.navigate('VizualizaHistoricoBanco', {\n              matricula: item.id\n            });\n          }\n        })]\n      });\n    } catch (error) {\n      return _jsxs(View, {\n        style: {\n          flex: 1,\n          flexDirection: 'row',\n          justifyContent: 'space-between',\n          marginLeft: '500'\n        },\n        children: [_jsx(Image, {\n          style: {\n            width: 100,\n            height: 100,\n            resizeMode: 'contain'\n          },\n          source: {\n            uri: \"https://i.pinimg.com/originals/59/54/1d/59541dc46eb5d0d8221721cbbc124c67.png\"\n          }\n        }), _jsx(Button, {\n          color: \"#005c81\",\n          title: item.nome,\n          onPress: function onPress() {\n            return props.navigation.navigate('VizualizaHistoricoBanco', {\n              matricula: item.id\n            });\n          }\n        })]\n      });\n    }\n  };\n  var separador = function separador() {\n    return _jsx(View, {\n      style: {\n        height: 1,\n        backgroundColor: 'black',\n        width: '100%'\n      }\n    });\n  };\n  useEffect(function () {\n    retornaDadosHistorico();\n    retornaDadosAlunos();\n  }, []);\n\n  var retornaDadosHistorico = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      try {\n        var snapshot = yield getDocs(colecaoHistorico);\n        for (var i = 0; i < snapshot.docs.length; i++) {\n          var dado = {\n            id: snapshot.docs[i].id,\n            matricula: snapshot.docs[i].data().matricula,\n            frequencia: snapshot.docs[i].data().frequencia,\n            nota: snapshot.docs[i].data().nota,\n            cod_turma: snapshot.docs[i].data().cod_turma\n          };\n          vetorHistorico.push(dado);\n        }\n        var vetor2 = vetorHistorico.slice();\n        setVetorHistorico(vetor2);\n        for (var _i = 0; _i < vetorHistorico.length; _i++) {\n          if (vetorHistorico[_i].cod_turma == props.disciplina) {\n            matriculas.push(vetorHistorico[_i].matricula);\n          }\n        }\n        var vetor3 = matriculas.slice();\n        setMatriculas(vetor3);\n      } catch (erro) {\n        console.log(erro.message);\n      }\n    });\n    return function retornaDadosHistorico() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var retornaDadosAlunos = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      try {\n        var snapshot = yield getDocs(colecaoAluno);\n        for (var i = 0; i < snapshot.docs.length; i++) {\n          var dado = {\n            id: snapshot.docs[i].id,\n            nome: snapshot.docs[i].data().nome,\n            cidade: snapshot.docs[i].data().cidade,\n            endereco: snapshot.docs[i].data().endereco,\n            foto: snapshot.docs[i].data().foto\n          };\n          vetorAluno.push(dado);\n        }\n        var vetor2 = vetorAluno.slice();\n        setVetorAluno(vetor2);\n        matriculas.forEach(function (matricula) {\n          for (var _i2 = 0; _i2 < vetorAluno.length; _i2++) {\n            if (vetorAluno[_i2].id == matricula) {\n              dadosAlunosTurma.push({\n                id: vetorAluno[_i2].id,\n                nome: vetorAluno[_i2].nome,\n                cidade: vetorAluno[_i2].cidade,\n                endereco: vetorAluno[_i2].endereco,\n                foto: vetorAluno[_i2].foto\n              });\n            }\n          }\n        });\n        var vetor4 = dadosAlunosTurma.slice();\n        setDadosAlunosTurma(vetor4);\n      } catch (erro) {\n        console.log(erro.message);\n      }\n    });\n    return function retornaDadosAlunos() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  return _jsx(View, {\n    style: {\n      flex: 1\n    },\n    children: _jsx(FlatList, {\n      data: dadosAlunosTurma,\n      keyExtractor: function keyExtractor(item) {\n        return item.id;\n      },\n      renderItem: renderiza,\n      ItemSeparatorComponent: separador,\n      ListHeaderComponent: separador,\n      ListFooterComponent: separador\n    })\n  });\n}","map":{"version":3,"names":["React","useEffect","useState","collection","getDocs","db","VisualizaAlunosBanco","props","colecaoHistorico","colecaoAluno","vetorHistorico","setVetorHistorico","matriculas","setMatriculas","vetorAluno","setVetorAluno","dadosAlunosTurma","setDadosAlunosTurma","renderiza","item","tamanho","Dimensions","get","height","length","flex","flexDirection","justifyContent","marginLeft","width","resizeMode","uri","foto","nome","navigation","navigate","matricula","id","error","separador","backgroundColor","retornaDadosHistorico","retornaDadosAlunos","snapshot","i","docs","dado","data","frequencia","nota","cod_turma","push","vetor2","slice","disciplina","vetor3","erro","console","log","message","cidade","endereco","forEach","vetor4"],"sources":["F:/Faculdade/2022/6ºSemestre/DevMobile/AC2/BranchRafa/Universidade/universidade/API/VisualizaTurma/visualizaAlunosBanco.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { View, Text, FlatList, Image, Dimensions, Button } from 'react-native'\r\nimport { collection, getDocs } from 'firebase/firestore'\r\n\r\nimport db from '../../config'\r\n\r\nexport default function VisualizaAlunosBanco(props) {\r\n    const colecaoHistorico = collection(db, 'Histórico');\r\n    const colecaoAluno = collection(db, 'Aluno');\r\n\r\n    const [vetorHistorico, setVetorHistorico] = useState([]);\r\n    const [matriculas, setMatriculas] = useState([]);\r\n    const [vetorAluno, setVetorAluno] = useState([]);\r\n    const [dadosAlunosTurma, setDadosAlunosTurma] = useState([]);\r\n\r\n    const renderiza = ({ item }) => {\r\n        const tamanho = Dimensions.get('window').height / matriculas.length\r\n\r\n        try {\r\n\r\n            return (\r\n                <View style={{ flex: 1, flexDirection: 'row', justifyContent: 'space-between', marginLeft: '500' }}>\r\n                    <Image\r\n                        style={{ width: 100, height: 100, resizeMode: 'contain' }}\r\n                        source={{ uri: item.foto }}\r\n                    />\r\n                    <Button\r\n                        color='#005c81'\r\n                        title={item.nome}\r\n                        onPress={() =>\r\n                            props.navigation.navigate('VizualizaHistoricoBanco', {\r\n                                matricula: item.id,\r\n                            })\r\n                        }\r\n                    />\r\n                </View>\r\n            );\r\n            \r\n        } catch (error) {\r\n            return (\r\n            <View style={{ flex: 1, flexDirection: 'row', justifyContent: 'space-between', marginLeft: '500' }}>\r\n                <Image\r\n                    style={{ width: 100, height: 100, resizeMode: 'contain' }}\r\n                    source={{ uri: \"https://i.pinimg.com/originals/59/54/1d/59541dc46eb5d0d8221721cbbc124c67.png\" }}\r\n                />\r\n                <Button\r\n                    color='#005c81'\r\n                    title={item.nome}\r\n                    onPress={() =>\r\n                        props.navigation.navigate('VizualizaHistoricoBanco', {\r\n                            matricula: item.id,\r\n                        })\r\n                    }\r\n                />\r\n            </View>\r\n        );\r\n        }\r\n        \r\n    }\r\n\r\n    const separador = () => {\r\n        return (\r\n            <View style={{ height: 1, backgroundColor: 'black', width: '100%' }}></View>\r\n        );\r\n    }\r\n\r\n    useEffect(\r\n        () => {\r\n            retornaDadosHistorico()\r\n            retornaDadosAlunos()\r\n        }, []\r\n    );\r\n\r\n    //get collection data\r\n    const retornaDadosHistorico = async () => {\r\n\r\n        try {\r\n            const snapshot = await getDocs(colecaoHistorico)\r\n\r\n            for (let i = 0; i < snapshot.docs.length; i++) {\r\n                const dado = { id: snapshot.docs[i].id, matricula: snapshot.docs[i].data().matricula, frequencia: snapshot.docs[i].data().frequencia, nota: snapshot.docs[i].data().nota, cod_turma: snapshot.docs[i].data().cod_turma }\r\n                vetorHistorico.push(dado)\r\n            }\r\n\r\n\r\n            const vetor2 = vetorHistorico.slice()\r\n\r\n            setVetorHistorico(vetor2)\r\n\r\n\r\n            for (let i = 0; i < vetorHistorico.length; i++) {\r\n                if (vetorHistorico[i].cod_turma == props.disciplina) {\r\n                    matriculas.push(vetorHistorico[i].matricula)\r\n                }\r\n            }\r\n\r\n            const vetor3 = matriculas.slice()\r\n            setMatriculas(vetor3)\r\n\r\n        } catch (erro) {\r\n            console.log(erro.message)\r\n        }\r\n\r\n    }\r\n\r\n    const retornaDadosAlunos = async () => {\r\n\r\n        try {\r\n            const snapshot = await getDocs(colecaoAluno)\r\n\r\n            for (let i = 0; i < snapshot.docs.length; i++) {\r\n                const dado = { id: snapshot.docs[i].id, nome: snapshot.docs[i].data().nome, cidade: snapshot.docs[i].data().cidade, endereco: snapshot.docs[i].data().endereco, foto: snapshot.docs[i].data().foto }\r\n                vetorAluno.push(dado)\r\n            }\r\n\r\n\r\n            const vetor2 = vetorAluno.slice()\r\n\r\n            setVetorAluno(vetor2)\r\n            matriculas.forEach(matricula => {\r\n                for (let i = 0; i < vetorAluno.length; i++) {\r\n                    if (vetorAluno[i].id == matricula) {\r\n                        dadosAlunosTurma.push({ id: vetorAluno[i].id, nome: vetorAluno[i].nome, cidade: vetorAluno[i].cidade, endereco: vetorAluno[i].endereco, foto: vetorAluno[i].foto })\r\n                    }\r\n                }\r\n            })\r\n\r\n            const vetor4 = dadosAlunosTurma.slice()\r\n            setDadosAlunosTurma(vetor4)\r\n\r\n        } catch (erro) {\r\n            console.log(erro.message)\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n    return (\r\n        <View style={{ flex: 1 }}>\r\n            <FlatList\r\n                data={dadosAlunosTurma}\r\n                keyExtractor={item => item.id}\r\n                renderItem={renderiza}\r\n                ItemSeparatorComponent={separador}\r\n                ListHeaderComponent={separador}\r\n                ListFooterComponent={separador}\r\n            />\r\n        </View>\r\n    );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}