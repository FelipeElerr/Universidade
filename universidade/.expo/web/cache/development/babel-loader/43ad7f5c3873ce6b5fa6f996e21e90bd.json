{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { collection, getDocs } from 'firebase/firestore';\nimport db from \"../../config\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function VisualizaHistoricoBanco(_ref) {\n  var route = _ref.route;\n  var colecaoHistorico = collection(db, 'Histórico');\n  var colecaoAluno = collection(db, 'Aluno');\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    vetorHistorico = _useState2[0],\n    setVetorHistorico = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    dadosTela = _useState4[0],\n    setDadosTela = _useState4[1];\n  var _useState5 = useState([]),\n    _useState6 = _slicedToArray(_useState5, 2),\n    vetorAluno = _useState6[0],\n    setVetorAluno = _useState6[1];\n  useEffect(function () {\n    retornaDadosHistoricoAluno();\n  }, []);\n\n  var retornaDadosHistoricoAluno = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      try {\n        var snapshot = yield getDocs(colecaoHistorico);\n        for (var i = 0; i < snapshot.docs.length; i++) {\n          var dadoHistorico = {\n            id: snapshot.docs[i].id,\n            matricula: snapshot.docs[i].data().matricula,\n            frequencia: snapshot.docs[i].data().frequencia,\n            nota: snapshot.docs[i].data().nota,\n            cod_turma: snapshot.docs[i].data().cod_turma\n          };\n          vetorHistorico.push(dadoHistorico);\n        }\n        var vetor2 = vetorHistorico.slice();\n        setVetorHistorico(vetor2);\n        try {\n          var _snapshot = yield getDocs(colecaoAluno);\n          for (var _i = 0; _i < _snapshot.docs.length; _i++) {\n            var dadoAluno = {\n              id: _snapshot.docs[_i].id,\n              nome: _snapshot.docs[_i].data().nome,\n              cidade: _snapshot.docs[_i].data().cidade,\n              endereco: _snapshot.docs[_i].data().endereco,\n              foto: _snapshot.docs[_i].data().foto\n            };\n            vetorAluno.push(dadoAluno);\n          }\n          var vetor3 = vetorAluno.slice();\n          setVetorAluno(vetor3);\n          var _loop = function _loop(_i2) {\n            console.log('passou');\n            if (vetorHistorico[_i2].matricula == route.params.matricula) {\n              console.log('entrouIF1');\n              vetorAluno.forEach(function (item) {\n                if (item.id == route.params.matricula) {\n                  console.log('entrouIF2');\n                  console.log('Nome: ', vetorAluno);\n                  console.log('Nota: ', vetorHistorico);\n                  dadosTela.push({\n                    id: item.id,\n                    nome: item.nome,\n                    foto: item.foto,\n                    frequencia: vetorHistorico[_i2].frequencia,\n                    nota: vetorHistorico[_i2].nota\n                  });\n                }\n              });\n            }\n          };\n          for (var _i2 = 0; _i2 < vetorHistorico.length; _i2++) {\n            _loop(_i2);\n          }\n          var vetor4 = dadosTela.slice();\n          setDadosTela(vetor4);\n          console.log('Dados tela:', dadosTela);\n        } catch (erro) {\n          console.log(erro.message);\n        }\n      } catch (erro) {\n        console.log(erro.message);\n      }\n    });\n    return function retornaDadosHistoricoAluno() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var separador = function separador() {\n    return _jsx(View, {\n      style: {\n        height: 1,\n        backgroundColor: 'black',\n        width: '100%'\n      }\n    });\n  };\n  var renderiza = function renderiza(_ref3) {\n    var item = _ref3.item;\n    return _jsxs(View, {\n      style: {\n        flex: 1,\n        flexDirection: 'row',\n        justifyContent: 'space-between'\n      },\n      children: [_jsx(Text, {\n        children: item.nome\n      }), _jsx(Text, {\n        children: item.frequencia\n      }), _jsx(Text, {\n        children: item.nota\n      })]\n    });\n  };\n  return _jsxs(View, {\n    style: {\n      flex: 1\n    },\n    children: [_jsx(Image, {\n      style: {\n        width: 300,\n        height: 300,\n        resizeMode: 'contain'\n      },\n      source: {\n        uri: function uri() {\n          retornaFoto();\n        }\n      }\n    }), _jsxs(View, {\n      style: {\n        flexDirection: 'row',\n        justifyContent: 'space-between'\n      },\n      children: [_jsx(Text, {\n        children: \"Aluno\"\n      }), _jsx(Text, {\n        children: \"Frequencia\"\n      }), _jsx(Text, {\n        children: \"Nota\"\n      })]\n    }), _jsx(FlatList, {\n      data: dadosTela,\n      keyExtractor: function keyExtractor(item) {\n        return item.id;\n      },\n      renderItem: renderiza,\n      ItemSeparatorComponent: separador,\n      ListHeaderComponent: separador,\n      ListFooterComponent: separador\n    })]\n  });\n}","map":{"version":3,"names":["React","useEffect","useState","collection","getDocs","db","VisualizaHistoricoBanco","route","colecaoHistorico","colecaoAluno","vetorHistorico","setVetorHistorico","dadosTela","setDadosTela","vetorAluno","setVetorAluno","retornaDadosHistoricoAluno","snapshot","i","docs","length","dadoHistorico","id","matricula","data","frequencia","nota","cod_turma","push","vetor2","slice","dadoAluno","nome","cidade","endereco","foto","vetor3","console","log","params","forEach","item","vetor4","erro","message","separador","height","backgroundColor","width","renderiza","flex","flexDirection","justifyContent","resizeMode","uri","retornaFoto"],"sources":["C:/Users/SAOFMACH/Documents/BranchRafa/Universidade/universidade/API/VisualizaTurma/visualizaHistoricoBanco.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { View, Text, FlatList, Dimensions, Image } from 'react-native'\r\nimport { collection, getDocs } from 'firebase/firestore'\r\n\r\nimport db from '../../config'\r\n\r\nexport default function VisualizaHistoricoBanco({ route }) {\r\n    const colecaoHistorico = collection(db, 'Histórico');\r\n    const colecaoAluno = collection(db, 'Aluno');\r\n    const [vetorHistorico, setVetorHistorico] = useState([]);\r\n    const [dadosTela, setDadosTela] = useState([]);\r\n    const [vetorAluno, setVetorAluno] = useState([]);\r\n    useEffect(\r\n        () => {\r\n            retornaDadosHistoricoAluno()\r\n        }, []\r\n    );\r\n\r\n    //get collection data\r\n    const retornaDadosHistoricoAluno = async () => {\r\n\r\n        try {\r\n            const snapshot = await getDocs(colecaoHistorico)\r\n\r\n            for (let i = 0; i < snapshot.docs.length; i++) {\r\n                const dadoHistorico = { id: snapshot.docs[i].id, matricula: snapshot.docs[i].data().matricula, frequencia: snapshot.docs[i].data().frequencia, nota: snapshot.docs[i].data().nota, cod_turma: snapshot.docs[i].data().cod_turma }\r\n                vetorHistorico.push(dadoHistorico)\r\n            }\r\n\r\n\r\n            const vetor2 = vetorHistorico.slice()\r\n\r\n            setVetorHistorico(vetor2)\r\n\r\n            try {\r\n                const snapshot = await getDocs(colecaoAluno)\r\n\r\n                for (let i = 0; i < snapshot.docs.length; i++) {\r\n                    const dadoAluno = { id: snapshot.docs[i].id, nome: snapshot.docs[i].data().nome, cidade: snapshot.docs[i].data().cidade, endereco: snapshot.docs[i].data().endereco, foto:snapshot.docs[i].data().foto }\r\n                    vetorAluno.push(dadoAluno)\r\n                }\r\n\r\n\r\n                const vetor3 = vetorAluno.slice()\r\n\r\n                setVetorAluno(vetor3)\r\n                for (let i = 0; i < vetorHistorico.length; i++) {\r\n                    console.log('passou')\r\n                    if (vetorHistorico[i].matricula == route.params.matricula) {\r\n                        console.log('entrouIF1')\r\n                        vetorAluno.forEach(item => {\r\n                            if (item.id == route.params.matricula) {\r\n                                console.log('entrouIF2')\r\n                                console.log('Nome: ', vetorAluno)\r\n                                console.log('Nota: ', vetorHistorico)\r\n                                dadosTela.push({ id:item.id, nome: item.nome, foto:item.foto, frequencia: vetorHistorico[i].frequencia, nota: vetorHistorico[i].nota})\r\n                            }\r\n                        })\r\n                    }\r\n                }\r\n\r\n                const vetor4 = dadosTela.slice()\r\n                setDadosTela(vetor4)\r\n                console.log('Dados tela:', dadosTela);\r\n\r\n            } catch (erro) {\r\n                console.log(erro.message)\r\n            }\r\n\r\n        }catch (erro) {\r\n            console.log(erro.message)\r\n        }\r\n\r\n    }\r\n\r\n    const separador = () => {\r\n        return (\r\n            <View style={{ height: 1, backgroundColor: 'black', width: '100%' }}></View>\r\n        );\r\n    }\r\n\r\n    const renderiza = ({ item }) => {\r\n        \r\n        return (\r\n            <View style={{ flex: 1, flexDirection: 'row', justifyContent:'space-between'}}>\r\n                <Text>{item.nome}</Text>\r\n                <Text>{item.frequencia}</Text>\r\n                <Text>{item.nota}</Text>\r\n            </View>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <View style={{ flex: 1 }}>\r\n            <Image\r\n                    style={{ width: 300, height: 300, resizeMode: 'contain' }}\r\n                    source={{ uri: ()=>{retornaFoto()}}}\r\n            />\r\n            <View style={{flexDirection: 'row', justifyContent:'space-between'}}>\r\n                <Text>Aluno</Text>\r\n                <Text>Frequencia</Text>\r\n                <Text>Nota</Text>\r\n            </View>\r\n            <FlatList\r\n                data={dadosTela}\r\n                keyExtractor={item => item.id}\r\n                renderItem={renderiza}\r\n                ItemSeparatorComponent={separador}\r\n                ListHeaderComponent={separador}\r\n                ListFooterComponent={separador}\r\n            /> \r\n        </View>\r\n    );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}